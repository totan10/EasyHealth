<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Swiper demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper/swiper-bundle.min.css"
    />
    <style>
      .swiper-container {
        width: 80%;
        height: 500px;
        margin: 100px auto;
        overflow: hidden;
      }

      .swiper-slide {
        background-position: center;
        background-size: cover;
        border-radius: 10px;
        border: 4px solid transparent; /* Initially transparent border */
        transition: border-color 0.3s ease transform 0.3s ease; /* Smooth transition for border color */
        height: 400px;
      }
      /* Apply border to the centered slide */
      .slide-centered {
        border-color: #007bff; /* Border color (adjust as needed) */
        transform: translateX(-5px); /* Adjust the amount based on preference */
      }

      /* Keyframes for appearing (from right) animation */
      @keyframes fadeInFromRight {
        from {
          opacity: 0;
          transform: translateX(20px); /* Start off-screen to the right */
        }
        to {
          opacity: 1;
          transform: translateX(0); /* Slide in from the right */
        }
      }

      /* Keyframes for fading out (to left) animation */
      @keyframes fadeOutToLeft {
        from {
          opacity: 1;
          transform: translateX(0); /* Start visible */
        }
        to {
          opacity: 0;
          transform: translateX(-20px); /* Slide out to the left */
        }
      }

      /* Apply animations to visible and hidden states */
      .header-visible {
        animation: fadeInFromRight 0.5s ease forwards; /* Fade in from right */
      }

      .header-hidden {
        animation: fadeOutToLeft 0.3s ease forwards; /* Fade out to left */
        pointer-events: none; /* Disable pointer events while hidden */
      }

      h1 {
        color: white;
      }
    </style>
  </head>

  <body>
    <div class="swiper-container">
      <div class="swiper-wrapper">
        <div
          class="swiper-slide"
          style="
            background-image: url('https://swiperjs.com/demos/images/nature-1.jpg');
          "
        >
          <h1 class="header-hidden">Slide 1</h1>
        </div>
        <div
          class="swiper-slide"
          style="
            background-image: url('https://swiperjs.com/demos/images/nature-2.jpg');
          "
        >
          <h1 class="header-hidden">Slide 2</h1>
        </div>
        <div
          class="swiper-slide"
          style="
            background-image: url('https://swiperjs.com/demos/images/nature-3.jpg');
          "
        >
          <h1 class="header-hidden">Slide 3</h1>
        </div>
        <div
          class="swiper-slide"
          style="
            background-image: url('https://swiperjs.com/demos/images/nature-4.jpg');
          "
        >
          <h1 class="header-hidden">Slide 4</h1>
        </div>
      </div>
    </div>

    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var swiper = new Swiper(".swiper-container", {
          effect: "coverflow",
          grabCursor: true,
          centeredSlides: true,
          slidesPerView: 2,
          coverflowEffect: {
            rotate: 20,
            stretch: 0,
            depth: 300,
            modifier: 1,
            slideShadows: true,
          },
          spaceBetween: 0,
          loop: true,
          autoplay: {
            delay: 2500,
            disableOnInteraction: false,
          },
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
          },
          speed: 800,
          on: {
            init: function () {
              // Initially show header text of the centered slide
              updateHeaderTextVisibility(this);
              // Adjust slide transition duration dynamically for smoother animation
              this.params.speed = 800; // Set desired transition duration (in milliseconds)
            },
            slideChangeTransitionEnd: function () {
              // Update header text visibility on slide change
              updateHeaderTextVisibility(this);
            },
            transitionEnd: function () {
              // Handle transition end (manual or automated)
              updateHeaderTextVisibility(this);
            },
          },
        });
        // Function to update header text visibility based on slide position
        // Function to update header text visibility based on slide position
        function updateHeaderTextVisibility(swiperInstance) {
          var swiperRect = swiperInstance.el.getBoundingClientRect();
          var slides = swiperInstance.slides;

          slides.forEach(function (slide) {
            var header = slide.querySelector("h1");
            var slideRect = slide.getBoundingClientRect();

            // Check if the slide is centered horizontally
            var isCentered =
              slideRect.left >= swiperRect.left &&
              slideRect.right <= swiperRect.right;

            if (isCentered) {
              slide.classList.add("slide-centered");
              header.classList.remove("header-hidden");
              header.classList.add("header-visible");
            } else {
              slide.classList.remove("slide-centered");
              header.classList.remove("header-visible");
              header.classList.add("header-hidden");
            }
          });
        }
      });
    </script>
  </body>
</html>
